# =============================================================================
# ETF 推荐系统配置文件
# =============================================================================
# 本配置文件定义了 ETF 推荐系统的所有参数
# 包括 ETF 池、市场状态机参数、风险控制等

# =============================================================================
# ETF 资产池
# =============================================================================
universe:
  # 所有可投资的 ETF 列表
  # 分为三大类：大类/风格、行业、防守腿

  # --- 大类/风格 ETF ---
  # SPY: 标普500（大盘核心）
  # QQQ: 纳斯达克100（科技权重高）
  # IWM: 罗素2000（小盘股）
  # MTUM: iShares 动量因子
  # QUAL: iShares 质量因子
  # USMV: iShares 低波动

  # --- 行业 ETF ---
  # XLK: 科技
  # XLF: 金融
  # XLV: 医疗
  # XLE: 能源
  # XLI: 工业
  # XLY: 可选消费
  # XLP: 必需消费
  # XLU: 公用事业

  # --- 防守腿 ETF ---
  # TLT: 20年+国债（利率对冲）
  # IEF: 7-10年国债（中期债券）
  # GLD: 黄金（避险资产）

  # 股票类 ETF
  equity_symbols:
    - SPY # 标普500
    - QQQ # 纳斯达克100
    - IWM # 罗素2000小盘
    - MTUM # 动量因子
    - XLK # 科技行业
    - XLF # 金融行业
    - XLV # 医疗行业
    - XLE # 能源行业
    - XLI # 工业行业
    - XLY # 可选消费

  # 防守类 ETF（债券、黄金等）
  defensive_symbols:
    - TLT # 长期国债
    - IEF # 中期国债
    - GLD # 黄金

  # 核心持仓（这些 ETF 有最高权重上限）
  core_symbols:
    - SPY
    - QQQ

  # 市场基准（用于判断大盘状态）
  market_benchmark: SPY

  # VIX 指数代码（用于恐慌判断）
  vix_symbol: "^VIX"

  # 个股池（卫星持仓候选）
  # 仅在 RISK_ON 时推荐
  stock_symbols:
    # 科技巨头
    - AAPL # Apple
    - MSFT # Microsoft
    - GOOGL # Google
    - AMZN # Amazon
    - META # Meta (Facebook)
    - NVDA # NVIDIA
    - TSLA # Tesla
    # 消费
    - WMT # Walmart
    - HD # Home Depot
    - MCD # McDonald's
    - COST # Costco
    # 金融
    - JPM # JPMorgan
    - V # Visa
    - MA # Mastercard
    # 医疗
    - JNJ # Johnson & Johnson
    - UNH # UnitedHealth

# =============================================================================
# 市场状态机参数 (Regime Engine)
# =============================================================================
regime:
  # 长期趋势均线天数
  ma_window: 200

  # 中期动量计算天数
  momentum_window: 60

  # VIX 恐慌阈值
  # VIX < 20: 市场平静
  # VIX > 30: 市场恐慌
  vix_threshold: 20.0

  # 各信号权重（加起来应为 1.0）
  weight_trend: 0.4 # 趋势信号权重
  weight_vix: 0.3 # VIX 信号权重
  weight_momentum: 0.3 # 动量信号权重

# =============================================================================
# 资产配置参数 (Core Allocator)
# =============================================================================
allocation:
  # 不同市场状态下的股票/防守比例
  regime_allocation:
    RISK_ON:
      equity: 0.80 # 股票类 80%
      defensive: 0.20 # 防守类 20%
    NEUTRAL:
      equity: 0.50 # 股票类 50%
      defensive: 0.50 # 防守类 50%
    RISK_OFF:
      equity: 0.20 # 股票类 20%
      defensive: 0.80 # 防守类 80%

  # 选择 Top-N 个 ETF
  top_n_equity: 5 # 股票类选前5
  top_n_defensive: 2 # 防守类选前2

# =============================================================================
# 组合优化 (Portfolio Optimization)
# =============================================================================
optimizer:
  # 优化方法:
  # - inverse_vol: 反向波动率加权 (简单，默认)
  # - min_variance: 最小方差 (稳健)
  # - risk_parity: 风险平价 (均衡)
  method: min_variance

  # 协方差矩阵计算窗口
  lookback: 252

# =============================================================================
# 再平衡规则
# =============================================================================
rebalance:
  # 再平衡频率: M=月度, W=周度
  rule: M

# =============================================================================
# 信号参数
# =============================================================================
signal:
  # 趋势过滤均线
  ma_long: 200

  # 动量计算窗口（多周期）
  mom_windows: [20, 60, 120, 240]

  # 各周期权重
  mom_weights: [0.25, 0.25, 0.25, 0.25]

# =============================================================================
# 风险控制
# =============================================================================
risk:
  # 目标年化波动率（暂未启用）
  target_vol_annual: 0.10

  # 波动率回溯天数
  vol_lookback: 60

  # 单一资产权重上限
  max_weight_single: 0.30

  # 核心资产组合权重上限
  max_weight_core: 0.50

  # 交易成本 (basis points)
  cost_bps: 5.0

# =============================================================================
# 缓存设置
# =============================================================================
cache:
  enabled: true
  dir: cache

# =============================================================================
# 数据源
# =============================================================================
providers:
  tiingo:
    enabled: true
